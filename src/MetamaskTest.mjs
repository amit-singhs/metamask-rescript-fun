// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Curry from "../node_modules/rescript/lib/es6/curry.js";
import * as React from "react";
import * as Belt_Option from "../node_modules/rescript/lib/es6/belt_Option.js";

function reducer(state, action) {
  if (action.TAG === /* SetAccountAddress */0) {
    return {
            accountAddress: action._0,
            accountBalance: state.accountBalance
          };
  } else {
    return {
            accountAddress: state.accountAddress,
            accountBalance: action._0
          };
  }
}

function MetamaskTest(Props) {
  var match = React.useState(function () {
        return window.ethereum;
      });
  var setWindowObj = match[1];
  var windowObj = match[0];
  var match$1 = React.useReducer(reducer, {
        accountAddress: undefined,
        accountBalance: undefined
      });
  var state = match$1[0];
  React.useEffect((function () {
          var getEthereumObject = function (param) {
            return Curry._1(setWindowObj, (function (param) {
                          return window.ethereum;
                        }));
          };
          window.ethereum.on("accountsChanged", getEthereumObject);
          
        }), [windowObj]);
  console.log("windowObj use state value: ", windowObj);
  windowObj.request({
          method: "eth_requestAccounts"
        }).then(function (acc) {
        console.log("Acc value fetched is: ", acc);
        return Promise.resolve(undefined);
      });
  var handlers_connectToMetamaskWallet = function (param) {
    console.log("Empty function");
    
  };
  var handlers_onListener = function (param) {
    console.log("Empty onlistener");
    
  };
  return React.createElement("div", undefined, React.createElement("p", {
                  className: "p-5 text-3xl"
                }, "Welcome to Metamask test"), React.createElement("div", {
                  className: "p-5"
                }, React.createElement("button", {
                      className: "p-5 bg-blue-400 rounded-lg text-white",
                      onClick: handlers_connectToMetamaskWallet
                    }, "Connect to Metamask")), React.createElement("div", {
                  className: "p-5 text-3xl "
                }, React.createElement("p", undefined, "Account address: ", Belt_Option.getWithDefault(state.accountAddress, "value unavailable(Metamask not connected)")), React.createElement("p", undefined, "Account balance: ", Belt_Option.getWithDefault(state.accountBalance, "value unavailable(Metamask not connected)"))));
}

var make = MetamaskTest;

export {
  reducer ,
  make ,
  
}
/* react Not a pure module */
